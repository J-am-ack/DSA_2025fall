检索

# 分块检索

![image-20241120101631166](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120101631166.png)

二分检索的插入也需要$O(logn)$

- 按块有序

前面最大的小于后面最小的

![image-20241120101742402](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120101742402.png)

![image-20241120101827874](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120101827874.png)

![image-20241120101940462](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120101940462.png)![image-20241120102235564](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120102235564.png)

若分块检索采用二分法

![image-20241120102311064](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120102311064.png)

![image-20241120102357457](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120102357457.png)

# 散列表的检索

`原理`

![](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120102617830.png)

![image-20241120102731878](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120102731878.png)

`一个例子`:

![image-20241120102847588](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120102847588.png)

![image-20241120102907587](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120102907587.png)

若检索`and`，H(and)=0,再检索0的位置，发现有`and`

但是0位置有哈希冲突

要尽量避免哈希冲突

![image-20241120103221002](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103221002.png)

![image-20241120103228396](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103228396.png)

几个重要概念：

![image-20241120103414783](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103414783.png)

![image-20241120103546089](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103546089.png)

## 一系列哈希函数

![image-20241120103614971](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103614971.png)

### 除余法

![image-20241120103646034](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103646034.png)

![image-20241120103706636](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103706636.png)

![image-20241120103912998](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103912998.png)

### 乘余取整法

![image-20241120103935286](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103935286.png)

![image-20241120103942810](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120103942810.png)

### 平方取中

![image-20241120104029670](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104029670.png)

### 数字分析法

![image-20241120104052955](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104052955.png)

![image-20241120104155300](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104155300.png)

![image-20241120104204653](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104204653.png)

![image-20241120104219853](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104219853.png)

### 基数转换

![image-20241120104236671](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104236671.png)

### 折叠法

![image-20241120104306649](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104306649.png)

## 散列函数的应用

平方取中最接近于随机化

![image-20241120104531459](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104531459.png)

## 冲突的解决方法

![image-20241120104606750](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104606750.png)

### 开散列方法（拉链法）适用于内存

![image-20241120104809515](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104809515.png)

![image-20241120104907164](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120104907164.png)

![image-20241120105050666](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120105050666.png)

- **成功查找的公式**：
  $$
  ASL_{succ} = \frac{\text{成功查找的总访问次数}}{\text{成功查找的总次数}}
  $$

  
  
  
- **失败查找的公式**：
  $$
  ASL_{unsucc} = \frac{\text{失败查找的总访问次数}}{\text{槽位总数(直接映射过去的)}}
  $$
  

这里 **失败** 需要均摊到哈希表的所有槽位，所以分母是 **槽位总数 \( m = 11 \)**。

![image-20241120105252764](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120105252764.png)

![image-20241120105259455](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120105259455.png)

![image-20241120105405165](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120105405165.png)

![image-20241120105501838](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120105501838.png)

![image-20241120105627920](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120105627920.png)

### 闭散列

![image-20241120105929423](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120105929423.png)

![image-20241120111817299](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120111817299.png)

可能会产生假溢出

>
>
>闭散列方法，也叫**开放地址法**，是一种解决哈希表冲突的方法。在这种方法中，当一个关键码 \( K \) 的哈希地址 \( h(K) \) 已被占用时，会通过**探查（或再散列）**找到另一个空闲的槽位来存储数据，而不会使用额外的结构（如链表）。
>
>以下是详细讲解闭散列方法的关键概念：
>
>---
>
>### **1. 基本原理**
>- 初始地址（基地址）：
>  $$
>  d_0 = h(K)
>  $$
>  
>
>
>- 通过哈希函数 \( h(K) \) 计算出关键码 \( K \) 的初始存储位置，称为基地址。
>
>- 如果基地址已被占用（哈希冲突发生），使用探查函数 \( p(K, i) \) 生成后续地址，形成一个 **探查序列**：
>  $$
>  d_i = d_0 + p(K, i) \mod M \quad (0 \leq i < M)
>  $$
>
>  - \( M \)：哈希表的长度。
>  - \( p(K, i) \)：探查函数，用于生成新的地址。
>
>---
>
>### **2. 探查方法（探查函数 \( p(K, i) \)）**
>闭散列法的关键在于选择探查函数，常见方法如下：
>
>#### **(1) 线性探查**
>$$
>p(K, i) = i
>$$
>
>
>
>
>
>- 探查序列为：
>  $$
>  d_0, d_0+1, d_0+2, \dots, d_0+(M-1) \mod M
>  $$
>
>  
>- 特点：
>  - 简单，容易实现。
>  - 可能出现**主聚集**问题（连续槽位被占用时，导致探查效率大幅下降）。
>  - ![image-20241120111906663](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120111906663.png)
>  - ![image-20241120112158304](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120112158304.png)
>
>![image-20241120112439596](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120112439596.png)
>
>- `改进`
>- ![image-20241120112934222](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120112934222.png)
>- ![image-20241120112948226](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120112948226.png)
>
>---
>
>#### **(2) 二次探查**
>$$
>P(K,2i-1)=i^2 \\
>P(K,2i)=-i^2
>$$
>
>![image-20241120113119235](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113119235.png)
>
>---
>
>#### **(3) 双散列探查**
>$$
>p(K, i) = i \cdot h_2(K)
>$$
>
>
>
>
>
>- \( h_2(K) \) 是另一个独立的哈希函数。
>- 探查序列为：
>  $$
>  d_0, d_0+h_2(K), d_0+2 \cdot h_2(K), \dots \mod M
>  $$
>  
>  
>  
>- 特点：
>  - 最有效的探查方法，减少聚集问题。
>
>---
>
>**(4) 伪随机探查**
>
>![image-20241120113232530](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113232530.png)![image-20241120113313574](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113313574.png)
>
>### 二级聚集
>
>#### **(3) 双散列探查**
>
>$$
>p(K, i) = i \cdot h_2(K)
>$$
>
>
>
>
>
>
>- $$( h_2(K) )$$ 是另一个独立的哈希函数。
>
>- 探查序列为：
>  $$
>  d_0, d_0+h_2(K), d_0+2 \cdot h_2(K), \dots \mod M
>  $$
>
>- 特点：
>
>  - 最有效的探查方法，减少聚集问题。
>
>![image-20241120113519117](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113519117.png)

### 闭散列的算法实现

![image-20241120113623403](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113623403.png)



![image-20241120113635241](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113635241.png)

![image-20241120113644294](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113644294.png)



### 插入

![image-20241120113701830](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113701830.png)

![image-20241120113810746](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113810746.png)

### 检索

![image-20241120113825573](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113825573.png)

![image-20241120113909994](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120113909994.png)

### 删除

![image-20241120114048780](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120114048780.png)

![image-20241120114127379](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120114127379.png)

![image-20241120114407535](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120114407535.png)

![image-20241120114530776](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120114530776.png)

![image-20241120114833714](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120114833714.png)

![image-20241120115044239](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241120115044239.png)