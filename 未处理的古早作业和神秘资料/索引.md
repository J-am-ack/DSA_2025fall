# 索引

## 定义介绍

![image-20241128163915047](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128163915047.png)

![image-20241128163929321](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128163929321.png)

![image-20241128163958018](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128163958018.png)

![image-20241128164156107](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128164156107.png)

```
主文件和索引文件在编程和数据管理中有不同的用途和功能：

主文件：

主文件通常包含主要的数据或代码。
在数据库中，主文件包含实际的数据记录。
在编程中，主文件可能是包含程序主要逻辑的文件，例如 main.py 或 index.js。
索引文件：

索引文件用于加速数据检索。
在数据库中，索引文件包含指向主文件中数据记录的指针，以便快速查找。
在编程中，索引文件可能是用于导入和组织其他模块或文件的文件，例如 index.html 或 index.js。
```

![image-20241128164232669](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128164232669.png)

## 线性索引

![image-20241128164509058](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128164509058.png)

![image-20241128164534793](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128164534793.png)

![image-20241128164652594](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128164652594.png)

![image-20241128164749570](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128164749570.png)

>
>
>在检索时，线性索引文件并不被读入内存，被读入内存的是二级线性索引文件 
>
>由于二级索引往往存储在内存，通常只需要访问两次磁盘即可：一次读入线性索引文件，一次读入数据库记录

## 静态索引

![image-20241128164920897](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128164920897.png)

## 倒排索引

![image-20241128165153216](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165153216.png)

![image-20241128165241527](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165241527.png)

![image-20241128165441256](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165441256.png)

![image-20241128165446881](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165446881.png)

![image-20241128165456465](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165456465.png)

### 对正文文件的倒排

![image-20241128165543098](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165543098.png)

#### 词索引

![image-20241128165601983](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165601983.png)

![image-20241128165744492](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165834849.png)

![image-20241128165853474](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165853474.png)

![image-20241128165901824](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165901824.png)

![image-20241128165932299](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128165932299.png)

## 动态索引

### B树

- 文件创建时生成
- 结构随着插入、删除等操作而改变
- 保持最佳的检索性能

![image-20241128170117158](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128170117158.png)

![image-20241128170327415](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128170327415.png)

>
>
>两个节点之间插入一个关键码

![image-20241128170412087](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128170412087.png)

![image-20241128170502532](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128170502532.png)

![image-20241128170523695](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128170523695.png)

![image-20241128170537974](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128170537974.png)

![image-20241128170615569](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128170615569.png)

>
>
>节点不一定在内存中(B树一般很大)

![image-20241128170921798](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128170921798.png)

![image-20241128170949227](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128170949227.png)

![image-20241128171039786](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128171039786.png)

![image-20241128171149134](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128171149134.png)

![image-20241128171221673](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128171221673.png)

![image-20241128171303790](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128171303790.png)

![image-20241128171438538](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128171438538.png)

![image-20241128171454217](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241128171454217.png)

## B+树

- 在叶节点上存储信息的上、
- 各层节点中的关键码均是下一层相应节点中最大关键码的复写

![image-20241129082336497](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241129082336497.png)

![image-20241129082355860](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241129082355860.png)

父节点是子节点最大值的拷贝

关键码都在叶子结点处

叶子结点有双向链表是为了方便范围查询，例如查($30\leq age \leq 70$)

### 差异

![image-20241129083117132](C:\Users\27157\AppData\Roaming\Typora\typora-user-images\image-20241129083117132.png)

![image-20241129083532826](索引/image-20241129083532826.png)

![image-20241129083552377](索引/image-20241129083552377.png)

![image-20241129083826179](索引/image-20241129083826179.png)

## B树性能分析

![image-20241129084101318](索引/image-20241129084101318.png)

![image-20241129084538361](索引/image-20241129084538361.png)

![](索引/image-20241129084607205.png)

## 红黑树

 ### 定义

本质是自平衡二叉搜索树

![image-20241129090438323](索引/image-20241129090438323.png)

![image-20241129090845349](索引/image-20241129090845349.png)

![image-20241129090936556](索引/image-20241129090936556.png)

![image-20241129091211555](索引/image-20241129091211555.png)

![image-20241129091524515](索引/image-20241129091524515.png)

## 旋转

![image-20241129091626482](索引/image-20241129091626482.png)

![image-20241129091919660](索引/image-20241129091919660.png)

>
>
>一开始当红色插入（避免和其他的子节点到根节点的黑色节点数目不同）

![image-20241129092213665](索引/image-20241129092213665.png)

![image-20241129092223265](索引/image-20241129092223265.png)

![image-20241129092315647](索引/image-20241129092315647.png)

![image-20241129092533430](索引/image-20241129092533430.png)

>
>
>两红顶一黑变成两黑顶一红
>
>让红红冲突向上迭代两层

![image-20241129092818201](索引/image-20241129092818201.png)

>
>
>这是把case2变成case 3

![image-20241129092851195](索引/image-20241129092851195.png)

![image-20241129093052938](索引/image-20241129093052938.png)

### 删除

### 普通二叉搜索树

![image-20241129093844218](索引/image-20241129093844218.png)

![image-20241129093902323](索引/image-20241129093902323.png)

![image-20241129093932303](索引/image-20241129093932303.png)

![image-20241129094036212](索引/image-20241129094036212.png)

### 红黑树删除

![image-20241129094112082](索引/image-20241129094112082.png)